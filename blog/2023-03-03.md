---
authors: [xiangcheng.kuo]
tags: [linux]
---

# 解决脚本中无法使用`passwd`命令

平时在写脚本的时候, 有时候会需要使用`passwd`命令来修改用户的密码.<br/>
例如为`NIS`的测试服务器新增一些测试用户, 并且为这些用户设置密码.<br/>
由于`passwd`需要交互式的输入, 所以在脚本中使用`passwd`命令会报错.<br/>
由于最新的`linux`发行版中`passwd`命令中的`--stdin`选项已经没有了.导致需要另一种方式来解决这个问题.<br/>

<!--truncate-->

## 解决方案

### 使用`chpasswd`

`chpasswd`命令可以用于批量修改用户的密码, 该命令的使用方法如下.

```bash
echo "user1:password1" | chpasswd
```

## 参考

- [Using the passwd Command from Within a Shell Script](https://www.baeldung.com/linux/passwd-shell-script#1-using-stdin-option)