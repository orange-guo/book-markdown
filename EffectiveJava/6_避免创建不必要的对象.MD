>在每次需要时重用一个对象而不是创建一个新的相同功能对象通常是恰当的。重用可以更快更流行。如果对象是不可变的，它总是可以被重用。

作为一个不应该这样做的极端例子，请考虑以下语句：

```
String str = new String("HelloWorld");  // DON'T DO THIS!
```

语句执行首先会在堆中创建一个String对象, 并在ConstantPool中查询是否存在HelloWorld这个字符串, 若常量池没有该值则创建该该常量并将该常量引用给String对象, 再将堆中的String对象的引用给栈中的str变量
![示例图](https://upload-images.jianshu.io/upload_images/8112725-6aaad5114ea04dfd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

改进后的代码
```
String str = "HelloWorld";
```
使用字面量赋值, 变量获得的是常量池中的引用, 因为在class文件进入内存时就会将字面量的变量加载进ConstantPool并赋给变量引用
![示例图](https://upload-images.jianshu.io/upload_images/8112725-f9efe12b981697f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


>通过两种方式赋值方式的代码分别执行五次进行速度对比
本机测试环境 OS: Ubuntu 18, RAM: 8GB, CPU: i7-7500U
不同的机器测试速度取决于CPU的速度

##速度测试

1.使用new
```
Long startTimeMillis = System.currentTimeMillis();

for (int i = 0; i < Integer.MAX_VALUE; i++) {
	String str = new String("HelloWorld");
}

// 69 148 174 105 95 (单位:毫秒)
System.out.println(System.currentTimeMillis() - startTimeMillis);
```

2.使用字面量
```
Long startTimeMillis = System.currentTimeMillis();

for (int i = 0; i < Integer.MAX_VALUE; i++) {
	String str = "HelloWorld";
}

// 3 4 4 2 10 (单位:毫秒)
System.out.println(System.currentTimeMillis() - startTimeMillis);
```

>构造方法每次调用时都必须创建一个新对象，而工厂方法永远不需要这样做，在实践中也不需要。除了重用不可变对象，如果知道它们不会被修改，还可以重用可变对象。在构建大型对象时, 因为构建比较复杂, 所以如果有重用的需要, 建议将其缓存起来

>另一种创建不必要的对象的方法是自动装箱（autoBoxing），它允许程序员混用基本类型和包装的基本类型，根据需要自动装箱和拆箱。 一般在方法调用栈内使用基本类型, 这样这样可以加快执行效率, 而对象的字段推荐使用包装类型, 如果该类会被反射赋值的话, 将`null`赋给基本类型是会发生问题的

##总结
>当你应该重用一个现有的对象时，不要试图去创建一个新的对象
