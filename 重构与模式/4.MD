[toc]
# 代码坏味道



## 0.前言
> 当你学会用挑剔的眼光审视自己所写的文字时，会发现将一段文字反复读上五六遍，每次都会找到新的问题。[Barzun,229]
> 重构，是对既有代码设计的改善，要求重构者需要知道什么样的代码需要改善， 重构目录可以获取这些知识，但是实际情况可能与目录中看得到不同
#### 最常见的设计问题
- 代码重复
- 代码不清晰
- 代码过于复杂
#### 《重构》中关于代码坏味道的指导
> 1. 在《重构》[F]一书的第3章“代码的坏味道”中，Martin Fowler和Kent Beck为辨别设计问题给出了更多指导。他们将设计问题与坏味联系起来，而且解释了哪种重构或者重构的组合最适于去除这些坏味。
> 2. Fowler和Beck的代码坏味针对的是出现在各种地方的问题：方法中、类中、类层次中、包（名字空间、模块）中和整个系统中。他们为坏味起的名字，例如依恋情结（Feature Envy）、基本类型偏执（Primitive Obsession）和夸夸其谈未来性（Speculative Generality），为程序员提供了丰富多彩的词汇，使用这些词汇能够更加快捷地探讨设计问题。



## 1. 重复代码
- 模板方法 (去除类层次中不同子类里存在的明显和/或微妙的重复)
- 工厂方法 (如果不同子类的创建逻辑不同但是其他实现方式都类似)
- 应用链构造函数 (如果类有多个构造方法并且包含重复代码)
- Composite (如果有单独的代码处理一个对象或者一组对象)
- Adapter (如果对象处理方式的区别仅在于它们的接口不同)
- Null Object (如果有条件逻辑用于处理空对象，而且相同的空逻辑在整个系统中都是重复的)



## 2. 过长函数



## 3. 条件逻辑复杂



## 4. 基本类型偏执



## 5. 不恰当的暴露



## 6. 解决方案蔓延



## 7. 异曲同工的类



## 8. 冗赘类



## 9. 结构过于大的类



## 10. 分支语句



## 11. 组合爆炸



## 12. 怪异解决方案


